(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),a=t.n(c),o=t(3),r=t(2),u=t(4),i=t.n(u),s="/api/persons",d=function(){return i.a.get(s).then((function(e){return e.data}))},l=function(e){return i.a.post(s,e).then((function(e){return e.data}))},j=function(e){return i.a.delete("".concat(s,"/").concat(e))},f=function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},b=t(0),h=function(e){var n=e.filt,t=e.handle;return Object(b.jsxs)("div",{children:["filter shown with ",Object(b.jsx)("input",{value:n,onChange:t})]})},m=function(e){var n=e.person,t=e.removePerson;return Object(b.jsxs)("div",{children:[n.name," ",n.number,Object(b.jsx)("button",{onClick:t,children:"delete"})]})},O=function(e){return Object(b.jsxs)("form",{onSubmit:e.addName,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:e.newNum,onChange:e.handleNumChange})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},v=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),u=Object(o.a)(a,2),i=u[0],s=u[1],v=Object(r.useState)(""),p=Object(o.a)(v,2),x=p[0],g=p[1],w=Object(r.useState)(""),N=Object(o.a)(w,2),C=N[0],k=N[1],S=Object(r.useState)(null),y=Object(o.a)(S,2),T=y[0],P=y[1],D=Object(r.useState)(null),E=Object(o.a)(D,2),J=E[0],L=E[1],A=t.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())}));Object(r.useEffect)((function(){d().then((function(e){c(e)}))}),[]);var B=function(e){var n=e.message;return null===n?null:Object(b.jsx)("div",{className:"doneNoti",children:n})},I=function(e){var n=e.message;return null===n?null:Object(b.jsx)("div",{className:"error",children:n})};return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Phonebook"}),Object(b.jsx)(B,{message:T}),Object(b.jsx)(I,{message:J}),Object(b.jsx)("h2",{children:"add a new"}),Object(b.jsx)(O,{addName:function(e){e.preventDefault();var n={name:i,number:x};if(console.log("nameObj: ",n),console.log("persons: ",t),!1===t.map((function(e){return e.name})).includes(i))l(n).then((function(e){c(t.concat(e)),s(""),g(""),P("Added ".concat(e.name)),setTimeout((function(){P(null)}),5e3)})).catch((function(e){L(e.response.data.error),setTimeout((function(){L(null)}),5e3)}));else if(window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))){var a=t.find((function(e){return e.name===i})).id;f(a,n).then((function(e){c(t.map((function(n){return n.id!==a?n:e}))),s(""),g(""),P("Changed number for ".concat(e.name)),setTimeout((function(){P(null)}),5e3)})).catch((function(e){L("".concat(i," was already removed from the phonebook")),setTimeout((function(){L(null)}),5e3),c(t.filter((function(e){return e.id!==a})))}))}},newName:i,newNum:x,handleNameChange:function(e){s(e.target.value)},handleNumChange:function(e){g(e.target.value)}}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)("div",{children:A.map((function(e){return Object(b.jsx)(m,{person:e,removePerson:function(){return n=e.id,void(window.confirm("Delete ".concat(t.find((function(e){return e.id===n})).name,"?"))&&(j(n),c(t.filter((function(e){return e.id!==n})))));var n}},e.id)}))}),Object(b.jsx)(h,{filt:C,handle:function(e){k(e.target.value)}})]})};t(38);a.a.render(Object(b.jsx)(v,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.045e9893.chunk.js.map